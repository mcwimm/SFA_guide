[
  {
    "objectID": "uncertainty.html",
    "href": "uncertainty.html",
    "title": "Uncertainty",
    "section": "",
    "text": "Individual\nThis section allows to estimate the uncertainty of the sap flow metrics caused by the following inputs individually: thermal diffusivity (Dnom), relative needle positions (Zax/Ztg), K estimates and sapwood depth. By defining the error (%) of these parameters, the sap flow metrics are recalculated. Uncertainty is displayed as absolute and relative values.\n\n\nCummulative\nThis section allows to estimate the uncertainty of the sap flow and tree water use caused by the following cumulated inputs: thermal diffusivity (Dnom), relative needle positions (Zax/Ztg), K estimates and sapwood depth. By defining the error (%) of these parameters, sap flow and tree water use are recalculated. Uncertainty is displayed as absolute and relative values.",
    "crumbs": [
      "SFA navigation",
      "Uncertainty"
    ]
  },
  {
    "objectID": "settings.html",
    "href": "settings.html",
    "title": "Settings",
    "section": "",
    "text": "The second menu item defines the project settings. All project settings are optional, but highly recommended for efficient use of SFA.",
    "crumbs": [
      "SFA navigation",
      "Settings"
    ]
  },
  {
    "objectID": "settings.html#box-measuring-environment",
    "href": "settings.html#box-measuring-environment",
    "title": "Settings",
    "section": "Box: Measuring environment",
    "text": "Box: Measuring environment\nIn this section of the application, the user defines the wood and sensor properties. Wood and sensor properties are critical to the calculation of SFD, SF, or TWU because they determine the position of each thermometer.\nWood properties describe, among other things, the stem geometry used to estimate thermometer positions. If known, accurate sapwood and heartwood depth measurements can be provided and used instead. Sensor properties describe needle spacing and needle penetration depth.\n\nThe calculated positions are displayed at the bottom of this box.\n\nThermometer positions can also be defined manually.\nThe definition of wood and sensor properties is only required, if the recordings are scaled to SFD, SF or TWU.",
    "crumbs": [
      "SFA navigation",
      "Settings"
    ]
  },
  {
    "objectID": "settings.html#box-save-settings",
    "href": "settings.html#box-save-settings",
    "title": "Settings",
    "section": "Box: Save settings",
    "text": "Box: Save settings\nSettings made on this page can be saved as R data file (.rds) and reused later (see #Data).",
    "crumbs": [
      "SFA navigation",
      "Settings"
    ]
  },
  {
    "objectID": "settings.html#box-project",
    "href": "settings.html#box-project",
    "title": "Settings",
    "section": "Box: Project",
    "text": "Box: Project\nThe user can create a project where all data will be stored during the session. This is done by selecting a project directory.\nTo create a project, press ‘Folder select’ to browse to the directory where all project files will be stored. Select a volume to browse (on Windows this is usually the working directory and the main drive, &lt;1&gt;). Select a project destination folder by clicking it’s name (&lt;2&gt;). You can also create a new subfolder by clicking &lt;3&gt;, entering a name and confirming by clicking the plus sign &lt;4&gt;. Finally, select the folder by clicking on ‘select’ &lt;5&gt;.\n\nAfter selecting a project destination folder, press ‘Create/set project’. The application will automatically create two subdirectories: ‘graphics’ and ‘csv-files’, where all processed files will be saved. If no project is created, all results (csv-files and graphics) will be saved in the root directory of the application, which may be in the temporary data. If the project was created successfully, the project name is displayed in the upper right corner of the SFA. The path to the project directory will be displayed. If no project was created, the path to the root directory is displayed.",
    "crumbs": [
      "SFA navigation",
      "Settings"
    ]
  },
  {
    "objectID": "settings.html#box-file-output-optional",
    "href": "settings.html#box-file-output-optional",
    "title": "Settings",
    "section": "Box: File output (optional)",
    "text": "Box: File output (optional)\nFile Output box allows the user to define - the format in which data files will be exported (csv, xls) - Note that these files will be saved in the csv file project folder regardless of the selected format. - the format in which images will be saved (jpeg, rdata, pdf). - the format in which all processed data files are exported (csv or excel, they are saved in the csv files folder of the project). - a title added to each saved image, e.g. the tree species studied - a prefix added to the name of each saved file",
    "crumbs": [
      "SFA navigation",
      "Settings"
    ]
  },
  {
    "objectID": "settings.html#box-visualization-optional",
    "href": "settings.html#box-visualization-optional",
    "title": "Settings",
    "section": "Box: Visualization (optional)",
    "text": "Box: Visualization (optional)\nIn the Visualization box, you can define a scheme (Wickham, 2016) and a viridis color palette to be used in all graphics.",
    "crumbs": [
      "SFA navigation",
      "Settings"
    ]
  },
  {
    "objectID": "recommendations.html",
    "href": "recommendations.html",
    "title": "Recommendations",
    "section": "",
    "text": "Wood and sensor properties can significantly affect the estimation of sap flow metrics and should be handled with care. The first step is to manually calculate the position of the first and last thermometer. After providing the values to the SFA, carefully compare your estimate with the estimates provided in the table in Settings &gt; Measurement Environment. Below are two examples of how this can be done.\n\n\nData set example: mangrove, thermometer position 1 The tree had a diameter of 25.2 cm, the bark was removed, and the sensor was placed with 11 mm distance from the stem. The sensor had 20 mm distance between needle head and the first thermometer and 10 mm distance between each of the 8 thermometers. The first (i.e., outermost) and last (i.e., innermost) thermometers are 11.7 cm and 4.7 cm from the center of the stem, respectively. The figure describes how these measurements are derived.\n\nThis information requires the following inputs in the SFA:\n\nThe Sensor Type drop-down menu allows you to enter specific sensor configurations, such as different distances between thermometers. If the inputs are correct, the distances for the outermost and innermost thermometers in the table at the bottom of the Measurement Environment box should match the previously calculated values.\n\n\n\n\nAssuming the wood and sensor properties from above but a spacer length of 25 mm leads to a specific case, where the first (outermost) thermometer is located outside the stem. The distance between the center of the stem and this thermometer is 13.1 cm, which is larger the stem radius of 12.6 cm. The first thermometer inside the stem has a distance of 12.1 cm to the center and the last (innermost) of 6.1 cm.\n\nIf all entries are made correctly the table in the SFA looks like this:\n\nBecause a thermometer is outside the stem, a warning appears below the table. In this case, the thermometer should be removed from the data set. This can be done in Data &gt; Filter &gt; Filter Options by specifying which thermometers should be used for further analysis.\n\nNote that this is a rare case. In the case of small stems with radii less than the needle length, the sensors can be fully inserted to obtain even two radial profiles (i.e., from the opposite side of the installation).",
    "crumbs": [
      "Recommendations"
    ]
  },
  {
    "objectID": "recommendations.html#example-1-all-thermometers-are-in-the-stem",
    "href": "recommendations.html#example-1-all-thermometers-are-in-the-stem",
    "title": "Recommendations",
    "section": "",
    "text": "Data set example: mangrove, thermometer position 1 The tree had a diameter of 25.2 cm, the bark was removed, and the sensor was placed with 11 mm distance from the stem. The sensor had 20 mm distance between needle head and the first thermometer and 10 mm distance between each of the 8 thermometers. The first (i.e., outermost) and last (i.e., innermost) thermometers are 11.7 cm and 4.7 cm from the center of the stem, respectively. The figure describes how these measurements are derived.\n\nThis information requires the following inputs in the SFA:\n\nThe Sensor Type drop-down menu allows you to enter specific sensor configurations, such as different distances between thermometers. If the inputs are correct, the distances for the outermost and innermost thermometers in the table at the bottom of the Measurement Environment box should match the previously calculated values.",
    "crumbs": [
      "Recommendations"
    ]
  },
  {
    "objectID": "recommendations.html#example-2-some-thermometers-are-outside-the-stem",
    "href": "recommendations.html#example-2-some-thermometers-are-outside-the-stem",
    "title": "Recommendations",
    "section": "",
    "text": "Assuming the wood and sensor properties from above but a spacer length of 25 mm leads to a specific case, where the first (outermost) thermometer is located outside the stem. The distance between the center of the stem and this thermometer is 13.1 cm, which is larger the stem radius of 12.6 cm. The first thermometer inside the stem has a distance of 12.1 cm to the center and the last (innermost) of 6.1 cm.\n\nIf all entries are made correctly the table in the SFA looks like this:\n\nBecause a thermometer is outside the stem, a warning appears below the table. In this case, the thermometer should be removed from the data set. This can be done in Data &gt; Filter &gt; Filter Options by specifying which thermometers should be used for further analysis.\n\nNote that this is a rare case. In the case of small stems with radii less than the needle length, the sensors can be fully inserted to obtain even two radial profiles (i.e., from the opposite side of the installation).",
    "crumbs": [
      "Recommendations"
    ]
  },
  {
    "objectID": "recommendations.html#case-1-no-flow-records-exist",
    "href": "recommendations.html#case-1-no-flow-records-exist",
    "title": "Recommendations",
    "section": "Case 1: No-flow records exist",
    "text": "Case 1: No-flow records exist\n\nA) Typical K diagram pattern\n\nIn this example data set, the K diagram shows a clear pattern as described, for example, in Nadezhdina 2018, including no-flow records. That is, the temperature differences (dTas, dTsa and dTSym) cross the y-axis.\nHere, K estimation method “no-flow median” can be used.\nThe left figure below shows the typical pattern observed in K diagrams. The red star in the left figure indicates the K value.\nControl plot 1 (right figure) confirms the fitness of the estimate, as the green (dTSym) and yellow (K+dTsa) data points intersect at the origin.\n\n\n\n\nB) Atypical K diagram pattern\n\nIn this example data set, the K diagram does not show a distinct pattern and the intersection of the data points with the y-axis is not clear.\nIn this case, many data points exist around the y-axis (for dTsym/dTas close to 0).\nUsing the no-flow median method can lead to over- or underestimation of K. This method takes the value closest to the y-axis and, if there are multiple values, calculates the median.\nThe figure below shows that the no-flow median method underestimates K for this data set. This is illustrated by the K control plot 1, where the yellow point cloud does not pass through the origin as it should.\n\n\n\nIn such cases, it is advised to check the no-flow regression method.\nIn the figure below, the no-flow regression is applied with the time filter set to 10 pm to 6 am.\nThe control plot 1 confirms that the estimate of K = 1.12 is better than K = 1.05 obtained with no-flow median.\n\n\n\nEstimation of K can be aided by zooming the K plot and control plots. This is done by selecting a fixed scale and entering the range of data to be displayed on the x-axis.",
    "crumbs": [
      "Recommendations"
    ]
  },
  {
    "objectID": "recommendations.html#case-2-absence-of-no-flow-records",
    "href": "recommendations.html#case-2-absence-of-no-flow-records",
    "title": "Recommendations",
    "section": "Case 2: Absence of no-flow records",
    "text": "Case 2: Absence of no-flow records\n\n\n\n\n\n\nCaution\n\n\n\n\n\nIt is recommended that conditions leading to no-flow records be artificially created in the field (see Experiments for details). If this is not possible, K must be approximated, but all estimates must be treated with caution. This is only recommended for users with experience in HFD data analysis.\n\n\n\n\nIn this example, the dataset contains no-flow records that occurred during 1 day in a 5-days measuring period (foggy and drizzling day)\nTo demonstrate the difficulty of estimating K in the absence of no-flow records, the data set was split into one set that included the wet day and one set that did not and therefore had no no-flow records (“dry conditions”).\n\n\n\nIn the case of absent no-flow records, it is recommended to use no-flow regression including filter options to optimize the regression.\nWithout any filter adjustments, the regression results in an estimate of K=1.77.\nWithout data points near the y-axis, control plots also become difficult to use. However, for regression, it is recommended to use the downward portion of the dTas point cloud. In this case, a steeper regression line for dTas is expected to result in a better estimate of K.\n\n\n\nTo optimize the regression, select values with as close to no-flow conditions as possible. The “diurnal flow” diagram helps to identify the time period with the lowest flow. In this example, sap flow is lowest between midnight and 10 am. Applying this to the filter, reduces K to 1.69.\n\n\n\nThe selection of data points used for the regression can be further refined by defining a maximum value for the ratio dTsym:dTas\nThe left diagram below shows the regression with the time filter, while the right diagram shows the regression when a maximum value for the ratio dTsym:dTas (i.e., 0.35) is defined. Both yield to similar K values, i.e., 1.69 and 1.71, respectively.\n\n\n\nDecreasing the maximum ratio dTsym:dTas would further decrease K in this example. When the threshold is set to 0.25, K is 1.61 but with a low coefficient of determination as only few data points are left for the regression.\nThe following figure shows the estimates for K when applying different thresholds for dTsym:dTas.\n\n - Using the complete data set, i.e., including the no-flow records obtained with the irrigation experiment, shows that K is ~1.61. This value could only be reached by setting the maximum ratio dTSym:dTas as low as possible.\n\n\nApplying this strategy to all thermometer positions, results in the following estimates of K. For 3 thermometers, K is overestimated in the absence of no-flow records.\n\n\n\nThe higher estimate for K result in an overestimation of daily TWU between 7.7 and 8.7 %.\n\n\n\nAs the flow rate in the second thermometer position is relatively high, the uncertainty of this K estimate has a high impact.\n\n\n\nExperiments\nIn the absence of no-flow records and if it is not possible to wait until such conditions occur (e.g., rain, fog or dew), it is advised to trigger no-flow or reverse flow conditions with experiments (Nadezhdina, 2018, p.125). Such experiments are: - artificial fog by crown microsprinkling - localized irrigation at the opposite side of sensor installation - cuttings bellow (for aboveground organs) or above (for roots) the measuring point to create zero driving force. The latter suits for short-term experiments and can be done at their end.",
    "crumbs": [
      "Recommendations"
    ]
  },
  {
    "objectID": "recommendations.html#case-3-instability-of-k",
    "href": "recommendations.html#case-3-instability-of-k",
    "title": "Recommendations",
    "section": "Case 3: instability of K",
    "text": "Case 3: instability of K\nSee Nadezhdina (2018, page 125f.) for detailed examples - K is usually stable over long periods of time. - However, if it changes, there may be several reasons + External influences: insufficient isolation of sensor and measuring point, power fluctuations, … + Internal influences: tissue drying, … - External influences should be avoided at the outset. However, observing the instability of K can help to identify the occurrence of such conditions. - Internal influences to not depend on the measuring setup. In such cases, several K values must be estimated for the same thermometer position. This is not directly integrated in the SFA, but can be achieved by using the visualization and filter options (‘Data’ menu) in the SFA. - For example, the change of dTas over time can be visualized with the following settings\n\n\nOr, alternatively, as in the following figure. Such a visualization can help to identify shifts in nighttime maxima.\n\n\n\nIf sudden shifts are detected, the data set can be divided using the ‘Filter’ section.",
    "crumbs": [
      "Recommendations"
    ]
  },
  {
    "objectID": "kvalue.html",
    "href": "kvalue.html",
    "title": "K parameter",
    "section": "",
    "text": "Here, a brief description of the estimation of K and the type of K plots is given. A detailed discussion on the meaning of K in SAP flow estimation can be found in [Nadezhdina, 2018] (https://doi.org/10.3832/ifor2381-011).",
    "crumbs": [
      "SFA navigation",
      "*K* parameter"
    ]
  },
  {
    "objectID": "kvalue.html#box-k-estimation-settings",
    "href": "kvalue.html#box-k-estimation-settings",
    "title": "K parameter",
    "section": "Box: K estimation settings",
    "text": "Box: K estimation settings\nK must be estimated for each thermometer position. By clicking a radio button (&lt;1&gt;), K is estimated using the selected method (&lt;2&gt;) and optional filter options (&lt;3&gt;). If K is estimated correctly, it can be set using the ‘Set K’ button (&lt;4&gt;).\n\nAll set K values appear in the ‘Selected’ table (&lt;1&gt;). The other tables (&lt;2&gt;) provide estimates for all thermometer positions at once, obtained with each method. All regression options (figure above &lt;3&gt;) apply to this table as well. If the values in these tables are sufficient, they can all be set at once by clicking “Use K estimates” below the table. If K values are provided in a csv file, the file can be uploaded in the ‘Read csv’ tab (&lt;2&gt;). Selected Ks can also be exported as a data file (&lt;3&gt;).\n\nFor more information and recommendations on how to estimate K, see the Recommendations section.",
    "crumbs": [
      "SFA navigation",
      "*K* parameter"
    ]
  },
  {
    "objectID": "kvalue.html#box-control-plots",
    "href": "kvalue.html#box-control-plots",
    "title": "K parameter",
    "section": "Box: Control plots",
    "text": "Box: Control plots\nThis box shows the typical K diagram (&lt;1&gt;) as well as two control diagrams (&lt;2&gt;) to assess the quality of the estimate.\nIt is possible to zoom in by defining the range of the x-axis variable by setting ‘Scales’ (&lt;3&gt;) to fixed and defining minimum and maximum values. If the ‘regression’ method is selected to estimate K, the regression line can be forced to cross the y-axis by enabling ‘Fullrange regression’ in the K-diagram\nThe ‘Save figures’ button (&lt;5&gt;) downloads the K-diagram as well as the two control diagrams for the selected thermometer position.",
    "crumbs": [
      "SFA navigation",
      "*K* parameter"
    ]
  },
  {
    "objectID": "general.html",
    "href": "general.html",
    "title": "General",
    "section": "",
    "text": "All produced figures can be downloaded. The format is either jpeg, rdata or pdf and is defined under ‘Settings &gt; File output &gt; Figure format’. A general figure title and appendix to figure files can be defined under ‘Figure title’ and ‘File appendix’ in the same box. The style of figures can be customized under ‘Settings &gt; Visualization’. Downloading figures as rdata file allows to load the figure-object to the R environment again and process the figure according to user demands.\nFor some figures, special settings are available. An explanation to those options is listed below.\n\nFacet wrap Shows subsets of data presented in individual panels\n\nFacet variable that is arranged in different panels, e.g. day of the year or thermometer positions\nNo. colums Number of columns presented in one row\nScales Description by (Wickham, Navarro and Pedersen, 2022)\n\n“scales =”fixed”: x and y scales are fixed across all panels.\nscales = “free_x”: the x scale is free, and the y scale is fixed.\nscales = “free_y”: the y scale is free, and the x scale is fixed.\nscales = “free”: x and y scales vary across panels.”\n\n\nFacet grid Similar to facet wrap. Presents data as 2d grid, defined by two variables.\nScales\n\nFree x and y scale is free\nFixed x and/ or y scale can be customized\n\n\n\n\nThis format allows data to be saved as an R object. In SFA, this option is available for all figures. This allows you to modify figures individually in R after downloading them. They can be loaded into R with load(\"&lt;file_name&gt;\"). The name of each object is plotObject.",
    "crumbs": [
      "General"
    ]
  },
  {
    "objectID": "general.html#rdata-files",
    "href": "general.html#rdata-files",
    "title": "General",
    "section": "",
    "text": "This format allows data to be saved as an R object. In SFA, this option is available for all figures. This allows you to modify figures individually in R after downloading them. They can be loaded into R with load(\"&lt;file_name&gt;\"). The name of each object is plotObject.",
    "crumbs": [
      "General"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Data",
    "section": "",
    "text": "The ‘data’ menu item is divided in three subsections: upload, filter and view.",
    "crumbs": [
      "SFA navigation",
      "Data"
    ]
  },
  {
    "objectID": "data.html#box-upload-file",
    "href": "data.html#box-upload-file",
    "title": "Data",
    "section": "Box: Upload file",
    "text": "Box: Upload file\nTo upload a .csv file, browse to the directory where the file is stored. Select the input file type and specify a string to be found in the header. If the upload is successful, the Preview Data box will display a table of data. To confirm the use of the file, click the ‘Use data’ button. The file name will then be displayed in the top right corner of the SFA. If the data is not displayed correctly, open the csv file externally and check the required column names (Table 1).\nThe SFA provides the ability to upload csv files of various types. A detailed description can be found in Table 1, including the required column names. In all cases, the file must contain time records, either in two columns named ‘date’ and ‘time’, or in a single column named ‘datetime’.\nColumn names are not case-sensitive.\nProcessed data files are previous outputs of the SFA and allow an analysis to be continued or figures to be generated and updated. In ‘read’ mode, the existing data cannot be modified. For example, if the data file contains SFD calculated with the negative formula, it cannot be changed to the positive formula. However, this mode does allow the numbers to be modified. The ‘write’ mode, on the other hand, allows to modify previously calculated results, e.g. by adjusting the wood properties.\n\n\n\nTable 1: Data types available in the SFA. Column names are not case sensitive.\n\n\n\n\n\n\n\n\n\n\nType\nDescription\nRequired columns\n\n\n\n\nRaw\nRaw HFD temperature recordings, this includes temperatures recorded with the upper, side and lower sensor, respectively, at different depths.\nColumn names must contain the number of thermometer position i and the letters U, S or L to indicate the sensor, e.g. “Temp 2 S”, “temp_1_U”.\n\n\nDelta\nRecordings of symmetrical and asymmetrical temperatures differences at different depths.\nColumns names must contain temperature differences, dtsym and dtas at different depths i, e.g. “dTSym_1”, “dTas 3”.\n\n\nProcessed read / Processed write\nProcessed recordings of SFS, SFD, etc., preferably produced with the SFA, in long-format. That is, one column contains the results, e.g. SFD, for all thermometer positions.\nColumn names are fixed and case sensitive. File contains at least: dTas, dTSym, dTsa, dTsym.dTas. Further optional column names are: k, SFS, SFDsw, depth, Aring, R, Cring, SFdepth, sfM1, sfM2, sfM3.",
    "crumbs": [
      "SFA navigation",
      "Data"
    ]
  },
  {
    "objectID": "data.html#box-restore-settings",
    "href": "data.html#box-restore-settings",
    "title": "Data",
    "section": "Box: Restore settings",
    "text": "Box: Restore settings\nIf the settings from a previous project were saved, they can be restored by uploading the .rds settings file here. Note that all settings except the working directory will be restored.",
    "crumbs": [
      "SFA navigation",
      "Data"
    ]
  },
  {
    "objectID": "data.html#box-preview-data",
    "href": "data.html#box-preview-data",
    "title": "Data",
    "section": "Box: Preview data",
    "text": "Box: Preview data\nData are shown in wide and long format. The latter can be downloaded as csv or excel files and later used to continue the analysis using the input file types ‘Processed read’ or ‘Processed write’ from the ‘input file type’ drop-down menu located on the “Upload file” tab.",
    "crumbs": [
      "SFA navigation",
      "Data"
    ]
  },
  {
    "objectID": "data.html#box-filter-options",
    "href": "data.html#box-filter-options",
    "title": "Data",
    "section": "Box: Filter options",
    "text": "Box: Filter options\nSFA provides several options for cleaning data before processing. These include - Selecting dates and times, e.g. removing the date the sensor was installed or removed. - Selecting minimum and maximum limits for each temperature difference variable - Remove outliers, separately for each temperature difference variable - Remove rows with NA values (not available or missing values) - Select individual sensor positions (e.g., only thermometers that were in sapwood)\nTo load or refresh filter options, click the Load Filter Options button. If a new dataset has been uploaded without updating the application, this button must also be clicked to update the filter options.\nClicking on ‘Apply filter’ will apply all the defined changes to the record. Delete Filter’ resets the dataset to its original Extend version.",
    "crumbs": [
      "SFA navigation",
      "Data"
    ]
  },
  {
    "objectID": "data.html#box-figures",
    "href": "data.html#box-figures",
    "title": "Data",
    "section": "Box: Figures",
    "text": "Box: Figures\nIn this box, the filtered data are visualized, either as a Violin Plot, Box Plot, Histogram or using Frequency Polygons. The ‘Variable’ and ‘Color/Group’ drop-down menus determine the appearance of the plot.\nFiltered data can be saved as a csv or excel file (long format) or as a graph.",
    "crumbs": [
      "SFA navigation",
      "Data"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The SapFlowAnalyzer User Guide",
    "section": "",
    "text": "The Sap Flow Analyzer (SFA) is a R Shiny app to process sap flow data recorded with the Heat Field Deformation (HFD) method. HFD is a thermodynamic method to measure sap flow using a continuous heating system (Nadezhdina et al., 2006; Nadezhdina, 2018). With a needle-like heater a heat field is created across the stem and the heat distribution is measured with three needle-like sensors. A needle sensor can have multiple, evenly distributed, thermometers which record radial flow profile. Based on the ratio of temperature gradients around the heater in axial (dTSym) and tangential (dTas) directions, sap flow metrics (sap flow per section, sap flow density), sap flow rate and tree water use can be estimated. The method requires to determine a calibration value (K) for each tree and thermometer. With the SFA, data can be cleaned or filtered, K can be determined and sap flow per section can be scaled to sap flow and total tree water use."
  },
  {
    "objectID": "launch.html",
    "href": "launch.html",
    "title": "Getting started",
    "section": "",
    "text": "The SFA can be initialized in two different ways:\nBoth methods require the free software R and the R-package ‘shiny’ (version 1.5 or higher, Chang et al., 2020). To install and load the package, run the following two lines of code in R:\nThe use of the IDE Rstudio is optional.",
    "crumbs": [
      "Getting started"
    ]
  },
  {
    "objectID": "launch.html#local-copy",
    "href": "launch.html#local-copy",
    "title": "Getting started",
    "section": "Local copy",
    "text": "Local copy\nClone or download the github repository https://github.com/mcwimm/SFA and navigate to the directory where the repository is located The main shiny app files, server.R and ui.R, can be used to launch SFA using the ‘Run App’ button in RStudio. This method allows the user to modify the code and collaborate with the developers.",
    "crumbs": [
      "Getting started"
    ]
  },
  {
    "objectID": "launch.html#online-verion",
    "href": "launch.html#online-verion",
    "title": "Getting started",
    "section": "Online verion",
    "text": "Online verion\nUse the ‘runGitHub’ command, specifying the repository name and owner, and the destination directory:\nrunGitHub(repo = \"SFA\", username = \"mcwimm\", destdir = NULL)\nThis method has the advantage that the user always has access to the latest version. However, files are stored in a temporary folder if not previously defined by the user, and may be lost.\nIf the application is started successfully, it will open in a browser window, leading the user to the SFA landing page, which provides some basic information about the application, the Heat Field Deformation (HFD) method, a short guide on how to use the application, and output options. The dash or plus sign in the upper right corner of each box allows you to collapse the box.",
    "crumbs": [
      "Getting started"
    ]
  },
  {
    "objectID": "sapflow.html",
    "href": "sapflow.html",
    "title": "Sap Flow",
    "section": "",
    "text": "This menu item shows sap flow metrics as diurnal flow and as radial profile. What is shown in box Figures needs to be defined in box Settings.\nIn the drop down menu ‘y-axis’ (box Settings), the user can choose which metric is shown, namely sap flow index (SFI), sap flow per section (SFS) or sap flow density (SFD). The style options define the appearance of the figure, i.e. whether all data is presented in one figure (‘Normal’), in different panels for thermometer position or day of the year (‘Facet wrap’) or if thermometers should be grouped. In the latter case, names of the groups and the associated thermometer positions must be provided.\nThe radio buttons under ‘SFS-formula’ define which formula is used to calculate SFS and hence, SFD. Detailed information on the use of those formulas is given in Nadezhdina and Nadezhdin, 2017 and Wimmler et al. (submitted). If the radio button ‘Negative’ is chosen, the negative formula is applied to each recording with SFI below a certain threshold. The default threshold for all thermometer positions is 0°C but can be customized either with a general threshold or for each thermometer position individually.\n\n\nSap flow rate and daily tree water can be calculated using three different upscaling methods (box Settings, methods are described in Wimmler et al. 2022). Upscaling is based on sap wood depth, thus the correct definition of wood properties is essential (Settings &gt; Measuring environment &gt; Wood properties).\nThe tab ‘Diurnal pattern’ shows the total sap flow rate of a tree (or stem) over time, while tabs ‘Daily balance’ and ‘Radial profile’ show the total tree water use, which is calculated as the area under the curve of the sap flow rate (box Figures).\nThe tree water use per day is shown in the table in box Tree water use.",
    "crumbs": [
      "SFA navigation",
      "Sap Flow"
    ]
  },
  {
    "objectID": "sapflow.html#tree-water-use",
    "href": "sapflow.html#tree-water-use",
    "title": "Sap Flow",
    "section": "",
    "text": "Sap flow rate and daily tree water can be calculated using three different upscaling methods (box Settings, methods are described in Wimmler et al. 2022). Upscaling is based on sap wood depth, thus the correct definition of wood properties is essential (Settings &gt; Measuring environment &gt; Wood properties).\nThe tab ‘Diurnal pattern’ shows the total sap flow rate of a tree (or stem) over time, while tabs ‘Daily balance’ and ‘Radial profile’ show the total tree water use, which is calculated as the area under the curve of the sap flow rate (box Figures).\nThe tree water use per day is shown in the table in box Tree water use.",
    "crumbs": [
      "SFA navigation",
      "Sap Flow"
    ]
  },
  {
    "objectID": "trouble.html",
    "href": "trouble.html",
    "title": "Troubleshooting",
    "section": "",
    "text": "We try to provide constructive warnings or error messages. However, we cannot catch all problems. Below is a list of possible bugs, their cause, and a possible solution. In addition, the output of the R console often provides a clue as to what went wrong.\nPlease note that the application has been developed and tested on a Windows system, and partially tested on Mac OSX.\nYou can report issues or get in contact with us by opening an Issue on GitHub.\n\nGeneral\n❌ Warning in R console: Error in (…) could not find function(…)\n✔ It is likely that not all packages were loaded. Please run the setup file (‘set-up.R’ located in the root directory) separately and make sure all required packages are installed.\n\n\nLaunch the SFA\n❌ The SFA does not open when started via the ‘Run App’ or ‘RungGitHub’-command, or the following error message is shown: ‘An error has occurred! could not find function (…)’.\n✔ Try to run the script ‘setup.R’ separately to install and load all required packages\n✔ On Mac: 1) run the command library(shiny) (see Launch the SFA), 2) grant access permissions to RStudio (open system preferences &gt; Security and privacy &gt; privacy and select “full disk access” from the left pane and click or add R Studio on the right pane). If this does not solve the problem and you are running the app through the wrapper function, then 3) you will need to also grant access to your navigation browser (i.e., Safari) as described for step 2)\n\n\nData upload\n❌ Preview table shows error message instead of uploaded table\n✔ Carefully check the upload settings. May open the csv file externally in a text editor and see which separator is used and how many lines need to be skipped. In some cases, the raw data file contains header sections between recordings, which can cause trouble. Delete them manually.\n\n\nK estimation\n❌ Figures do not show zero-flow axis (x=0) by default\n✔ This seems to only occur with Mac. To change the scale of the x-axis in the diagram enable ‘fixed’ scales in Box Control plots\n\n\nSap Flow Metrics\n❌ The SFS or SFD figures presents less thermometer positions than present in the data set\n✔ K values were not set for all positions. Go back to K-value &gt; Estimation and check table ‘Selected’ in the box K-value estimation.\n\n\nSap Flow Metrics\n❌ Negative formula option show less SFS and SFD data than present in the data set although all K values have been set.\n✔ More than one manual thresholds is provided but the total number of thresholds is smaller than the number of thermometers.",
    "crumbs": [
      "Troubleshooting"
    ]
  }
]